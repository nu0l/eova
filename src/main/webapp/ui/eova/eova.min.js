(function(a){a.extend({isNull:function(b){return void 0==b||null==b||""==b||""==b||"undefined"==b||"null"==b||"NULL"==b?!0:!1}});a.str={format:function(b){for(var c=0;c<arguments.length-1;c++)b=b.replace("{"+c+"}",arguments[c+1]);return b},clip:function(b,c){var a="",d=0;if(!b)return a;for(var e=0;e<b.length;e++){var g=b.charAt(e),d=0<=g.charCodeAt()&&128>=g.charCodeAt()?d+1:d+2;if(d>c)return a+"...";a+=g}return a},isNum:function(a){return null!=a&&0<a.length&&0==isNaN(a)?!0:!1},isCn:function(a){return/^([u4E00-u9FA5]|[uFE30-uFFA0])*$/.test(a)?!1:!0},encodeUrl:function(a){return encodeURIComponent(a)}};a.math={percent:function(a,c){return Math.round(a/c*1E4)/100+"%"},random:function(a,c){var b=Math.round(Math.random()*(c-a)+a);return b=Math.max(Math.min(b,c),a)}};a.json={toObj:function(a){return JSON.parse(a)},toStr:function(a){return JSON.stringify(a)}};a.time={format:function(a){var c=new Date;c.setTime(a);a=c.getFullYear();var b=10>c.getMonth()+1?"0"+(c.getMonth()+1):c.getMonth()+1,d=10>c.getDate()?"0"+c.getDate():c.getDate(),e=10>c.getHours()?"0"+c.getHours():c.getHours(),g=10>c.getMinutes()?"0"+c.getMinutes():c.getMinutes(),c=10>c.getSeconds()?"0"+c.getSeconds():c.getSeconds();return a+"-"+b+"-"+d+" "+e+":"+g+":"+c},toWeek:function(a){return a instanceof Date?"\u661f\u671f\u5929 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" ")[a.getDay()]:"Param error,date type!"}};a.verify={rules:{number:[/^\d+$/,"\u8bf7\u586b\u5199\u6570\u5b57"],a_z:[/^[a-z]+$/i,"\u8bf7\u586b\u5199\u5b57\u6bcd"],date:[/^\d{4}-\d{2}-\d{2}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u65e5\u671f\uff0c\u683c\u5f0f:yyyy-mm-dd"],time:[/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u65f6\u95f4\uff0c00:00\u523023:59\u4e4b\u95f4"],email:[/^[\w\+\-]+(\.[\w\+\-]+)*@[a-z\d\-]+(\.[a-z\d\-]+)*\.([a-z]{2,4})$/i,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u90ae\u7bb1"],url:[/^(https?|s?ftp):\/\/\S+$/i,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u7f51\u5740"],qq:[/^[1-9]\d{4,}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684QQ\u53f7"],idcard:[/^\d{6}(19|2\d)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)?$/,"\u8bf7\u586b\u5199\u6b63\u786e\u7684\u8eab\u4efd\u8bc1\u53f7\u7801"],tel:[/^(?:(?:0\d{2,3}[\- ]?[1-9]\d{6,7})|(?:[48]00[\- ]?[1-9]\d{6}))$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u7535\u8bdd\u53f7\u7801"],mobile:[/^1[3-9]\d{9}$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u624b\u673a\u53f7"],zipcode:[/^\d{6}$/,"\u8bf7\u68c0\u67e5\u90ae\u653f\u7f16\u7801\u683c\u5f0f"],chinese:[/^[\u0391-\uFFE5]+$/,"\u8bf7\u586b\u5199\u4e2d\u6587\u5b57\u7b26"],account:[/^\w{3,12}$/,"\u8bf7\u586b\u51993-12\u4f4d\u6570\u5b57\u3001\u5b57\u6bcd\u3001\u4e0b\u5212\u7ebf"],password:[/^[\S]{6,16}$/,"\u8bf7\u586b\u51996-16\u4f4d\u5b57\u7b26\uff0c\u4e0d\u80fd\u5305\u542b\u7a7a\u683c"],money:[/^(?!0\.00)(?:0|[1-9]\d*)(?:\.\d{1,2})?$/,"\u8bf7\u586b\u5199\u6709\u6548\u7684\u91d1\u989d"]},rule:function(a){alert(a)}}})(jQuery);(function(a){a.extend({extendPrototype:function(a,c){var b=function(){};b.prototype=c.prototype;a.prototype=new b;a.prototype.constructor=a},getHtmlOptions:function(a){var c=void 0;(a=a.$dom.data("options"))&&(c=eval("({"+a+"})"));return c},fuck:function(a){a.attr("readonly","readonly");a.css({background:"rgba(218, 218, 218, 0.4)"});a.unbind()},eovaInit:function(b,c,f,d){var e=[];b.each(function(){var b=a.data(this,f);b||(b=new c(this,d),a.data(this,f,b));e.push(b)});return 1==e.length?e[0]:e},eovaAutoHeight:function(a,c){var b=a.width(),b=parseInt(b/290);if(0!=b){var d=parseInt(c/b);0<c%b&&d++;return 40+25*d}},widgetReLoad:function(b,c){if(b&&null!=b){var f=a.getWidgetType(b);"datagrid"==f?c?b.datagrid("reload",c):b.datagrid("reload"):"treegrid"==f&&(c?b.treegrid("reload",c):b.treegrid("reload"))}},getWidgetType:function(a){var c="datagrid";-1!=a.context.URL.indexOf("/single_tree")&&(c="treegrid");return c},getWidgetSelected:function(b){var c=a.getWidgetType(b);if("datagrid"==c)return b.datagrid("getSelected");if("treegrid"==c)return b.treegrid("getSelected")},getWidgetSelections:function(b){var c=a.getWidgetType(b);if("datagrid"==c)return b.datagrid("getSelections");if("treegrid"==c)return b.treegrid("getSelections")},widgetClearSelections:function(b){var c=a.getWidgetType(b);if("datagrid"==c)return b.datagrid("clearSelections");if("treegrid"==c)return b.treegrid("clearSelections")},tipwarn:function(b,c){var f=b.tooltip({position:"bottom",deltaY:-6,showEvent:null,hideEvent:"mousemove",content:'\x3cspan\x3e\x3cspan class\x3d"pd5 icon-exclamation"\x3e\x26nbsp;\x3c/span\x3e'+c+"\x3c/span\x3e",onShow:function(){a(this).tooltip("tip").css({border:"1px solid transparent","background-color":"#fffcef","border-color":"#ffbb76",color:"#db7c22"})}}).tooltip("show");setTimeout(function(){f.tooltip("destroy")},3E3);return f},validation:function(b,c){if(!c.isValid){var f=a.tipwarn(a(c.element).parent(),c.msg);a(c.element).keydown(function(c){f.tooltip("destroy");a(this).unbind("keydown")})}},slideMsg:function(b,c){var f=a;c&&(f=c);f.messager.show({title:"\u64cd\u4f5c\u63d0\u793a",msg:b,timeout:1500,showType:"slide"})},alert:function(a,c){c&&null!=c&&""!=c||(c="\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01");c.startsWith("info")?(c=c.replace("info:",""),a.messager.alert("\u63d0\u793a",c,"info")):c.startsWith("warn")?(c=c.replace("warn:",""),a.messager.alert("\u8b66\u544a",c,"warning")):(c.startsWith("error")&&(c=c.replace("error:","")),a.messager.alert("\u9519\u8bef",c,"error"))},dialog:function(b,c,f,d,e){d||(d=945);e||(e=.9*a(window).height());var g=f.replace(/\//g,"_"),h=g.indexOf("?");-1!=h&&(g=g.substring(0,h-1));var k=parent.sy.modalDialog({id:g,title:c,url:f,buttons:[{id:"eovaSave",text:"\x26nbsp;\x26nbsp;\u4fdd\u5b58\x26nbsp;\x26nbsp;",handler:function(){k.find("iframe").get(0).contentWindow.btnSaveCallback(k,b,parent.$)}},{id:"eovaCancel",text:"\x26nbsp;\x26nbsp;\u53d6\u6d88\x26nbsp;\x26nbsp;",handler:function(){k.dialog("close")}}]},d,e),l=k.find("iframe").get(0).contentWindow;a(l).keyup(function(a){switch(a.keyCode){case 27:k.dialog("close")}}).keypress(function(a){!a.ctrlKey||10!=a.keyCode&&13!=a.keyCode||l.btnSaveCallback(k,b,parent.$)})},gridToExcel:function(){var a=function(a,b){return a.replace(/{(\w+)}/g,function(a,c){return b[c]})};return function(c,b){for(var d="\x3ctr\x3e",e=c.datagrid("getColumnFields"),f=0;f<e.length;f++){var h=e[f];console.log(h);"ck"!=h&&((h=c.datagrid("getColumnOption",h).title)||(h=""),d=d+"\x3ctd\x3e"+h+"\x3c/td\x3e")}for(var d=d+"\x3c/tr\x3e",k=c.datagrid("getRows"),l=0;l<k.length;l++){var m=k[l];console.log(m);d+="\x3ctr\x3e";for(f=0;f<e.length;f++)h=e[f],"ck"!=h&&(d=d+"\x3ctd\x3e"+m[h]+"\x3c/td\x3e");d+="\x3c/tr\x3e"}window.location.href="data:application/vnd.ms-excel;base64,"+window.btoa(unescape(encodeURIComponent(a('\x3chtml xmlns:o\x3d"urn:schemas-microsoft-com:office:office" xmlns:x\x3d"urn:schemas-microsoft-com:office:excel" xmlns\x3d"http://www.w3.org/TR/REC-html40"\x3e\x3chead\x3e\x3c!--[if gte mso 9]\x3e\x3cxml\x3e\x3cx:ExcelWorkbook\x3e\x3cx:ExcelWorksheets\x3e\x3cx:ExcelWorksheet\x3e\x3cx:Name\x3e{worksheet}\x3c/x:Name\x3e\x3cx:WorksheetOptions\x3e\x3cx:DisplayGridlines/\x3e\x3c/x:WorksheetOptions\x3e\x3c/x:ExcelWorksheet\x3e\x3c/x:ExcelWorksheets\x3e\x3c/x:ExcelWorkbook\x3e\x3c/xml\x3e\x3c![endif]--\x3e\x3c/head\x3e\x3cbody\x3e\x3ctable\x3e{table}\x3c/table\x3e\x3c/body\x3e\x3c/html\x3e',{worksheet:b||"Worksheet",table:d}))))}}(),eovatab:function(a,c,f,d){a.addTab(f,c,d)}});a.extend(a.fn.datagrid.defaults.editors,{eovatext:{init:function(b,c){var f=a('\x3cdiv class\x3d"eova-text" name\x3d"'+c.name+'"\x3e\x3c/div\x3e').appendTo(b);f.eovatext(c);return f},getValue:function(b){return a(b).eovatext().getValue()},setValue:function(b,c){a(b).eovatext().setValue(c)},resize:function(b,c){a(b).eovatext().setWidth(c)}},eovatime:{init:function(b,c){var f=a('\x3cdiv class\x3d"eova-time"\x3e\x3c/div\x3e').appendTo(b);f.eovatime(c);return f},getValue:function(b){return a(b).eovatime().getValue()},setValue:function(b,c){a(b).eovatime().setValue(c)},resize:function(b,c){a(b).eovatime().setWidth(c)}},eovacombo:{init:function(b,c){var f=a('\x3cdiv class\x3d"eova-combo"\x3e\x3c/div\x3e').appendTo(b);f.eovacombo(c);return f},destroy:function(b){a(b).eovacombo().destroy()},getText:function(b){return a(b).eovacombo().getText()},getValue:function(b){return a(b).eovacombo().getValue()},setValue:function(b,c){var f=[];c&&""!=c&&(f=-1==c.indexOf(",")?[c]:c.split(","));a(b).eovacombo().setTexts(f)},resize:function(b,c){a(b).eovacombo().setWidth(c)}},eovafind:{init:function(b,c){var f=a('\x3cdiv class\x3d"eova-find"\x3e\x3c/div\x3e').appendTo(b);f.eovafind(c);return f},getText:function(b){return a(b).eovafind().getText()},getValue:function(b){return a(b).eovafind().getValue()},setValue:function(b,c){a(b).eovafind().setText(c)},resize:function(b,c){a(b).eovafind().setWidth(c)}},eovabool:{init:function(b,c){var f=a('\x3cdiv class\x3d"eova-bool"\x3e\x3c/div\x3e').appendTo(b);f.eovabool(c);return f},getValue:function(b){return a(b).eovabool().getChecked()},setValue:function(b,c){a(b).eovabool().setChecked(c)},resize:function(a,c){}},eovainfo:{init:function(b,c){var f=a('\x3cdiv class\x3d"eova-info"\x3e\x3c/div\x3e').appendTo(b);f.eovainfo(c);return f},getValue:function(b){return a(b).eovainfo().getValue()},setValue:function(b,c){a(b).eovainfo().setValue(c)},resize:function(b,c){a(b).eovainfo().setWidth(c)}}});a.extend(a.fn.datagrid.methods,{editCell:function(b,c){return b.each(function(){a(this).datagrid("options");for(var b=a(this).datagrid("getColumnFields",!0).concat(a(this).datagrid("getColumnFields")),d=0;d<b.length;d++){var e=a(this).datagrid("getColumnOption",b[d]);e.editor1=e.editor;b[d]!=c.field&&(e.editor=null)}a(this).datagrid("beginEdit",c.index);(d=a(this).datagrid("getEditor",c))&&(a(d.target).hasClass("textbox-f")?a(d.target).textbox("textbox").focus():a(d.target).focus());for(d=0;d<b.length;d++)e=a(this).datagrid("getColumnOption",b[d]),e.editor=e.editor1})},enableCellEditing:function(b){return b.each(function(){var c=a(this),b=c.datagrid("options");b.oldOnClickCell=b.onClickCell;b.onClickCell=function(d,e){if(void 0!=b.editIndex)if(c.datagrid("validateRow",b.editIndex)){if(!a("#"+b.id).parent().isValid())return;c.datagrid("endEdit",b.editIndex);b.editIndex=void 0}else return;c.datagrid("selectRow",d).datagrid("editCell",{index:d,field:e});b.editIndex=d;b.oldOnClickCell.call(this,d,e)}})}});a.fn.mask=function(b){b||(b=22);1!=a(this).data("mask")&&(b='\x3cdiv class\x3d"divMask" style\x3d"position: absolute; width: 100%; height: '+b+'px; left: 0px; top: 1px; background: rgba(218, 218, 218, 0.4);z-index: 8999"\x3e \x3c/div\x3e',a(this).wrap('\x3cspan style\x3d"position: relative;font-size:16px;"\x3e\x3c/span\x3e'),a(this).parent().append(b),a(this).data("mask",1))};a.fn.unmask=function(){1==a(this).data("mask")&&(a(this).parent().find(".divMask").remove(),a(this).unwrap(),a(this).data("mask",0))}})(jQuery);var EovaWidget=function(){var a={object:{},fields:{},config:{}};return{data:a,init:function(b,c,f,d){c&&""!=c?a.object=JSON.parse(c):$.syncGetJson("/meta/object/"+b,function(c){a.object=c});f&&""!=f?a.fields=JSON.parse(f):$.syncGetJson("/meta/fields/"+b,function(c){a.fields=c});d&&""!=d&&(a.config=JSON.parse(d))}}}();(function(a){TEXTBOX="textbox";a.fn.eovatext=function(c){var f=[];this.each(function(){var d=a.data(this,TEXTBOX);d?a.extend(d.options,c):(d=new b(this,c),d.render(),d.bindEvents());a.data(this,TEXTBOX,d);f.push(d)});return 1==f.length?f[0]:f};var b=a.fn.eovatext.TextBox=function(c,b){this.$dom=a(c);this.defaults={width:180,btnTitle:"\u70b9\u51fb\u6e05\u7a7a\u6587\u672c",btnIcon:"",isReadonly:!1,disable:!1,required:!1,onChange:function(a){}};this.options=a.extend({},this.defaults,a.getHtmlOptions(this),b);this.name=this.$dom.attr("name");this.$dom.removeAttr("name");this.value=this.$dom.attr("value");this.$dom.removeAttr("value")};b.prototype.render=function(){var c=a("\x3cinput type\x3d'text' autocomplete\x3d'off' /\x3e").appendTo(this.$dom),b=a("\x3ci class\x3d'ei'\x3e\x3c/i\x3e").appendTo(this.$dom);b.attr("title",this.options.btnTitle);this.name&&c.attr("name",this.name);this.value&&c.attr("value",this.value);this.options.placeholder&&c.attr("placeholder",this.options.placeholder);this.options.required&&c.attr("required","required");this.options.isReadonly&&a.fuck(c);this.$textbox=c;this.$btn=b;this.setWidth(this.options.width)};b.prototype.bindEvents=function(){var a=this.$textbox,b=this.$dom,d=this.options;d.isReadonly||this.$btn.bind("click",function(){a.val("")});var e=!1;a.bind("propertychange input",function(){e||(e=!0,setTimeout(function(){d.onChange.call(b,a.val());e=!1},500))})};b.prototype.getValue=function(){return this.$textbox.val()};b.prototype.setValue=function(a){this.$textbox.val(a)};b.prototype.getWidth=function(){return this.options.width+20};b.prototype.setWidth=function(a){this.$textbox.outerWidth(a-22)};b.prototype.readonly=function(a){a&&this.$textbox.attr("readonly",!0)}})(jQuery);(function(a){var b=a.fn.eovatext.TextBox;AUTOBOX="autobox";a.fn.eovaauto=function(b){var d=[];this.each(function(){var e=a.data(this,AUTOBOX);e?a.extend(e.options,b):(e=new c(this,b),e.render(),e.$textbox.css("background-color","#EBEBE4"),e.bindEvents());a.data(this,AUTOBOX,e);d.push(e)});return 1==d.length?d[0]:d};var c=a.fn.eovaauto.AutoBox=function(c,d){b.apply(this,arguments);this.defaults={btnTitle:"\u81ea\u589e\u957f\u5b57\u6bb5",disable:!0};this.options=a.extend({},this.options,this.defaults,d)};a.extendPrototype(c,b);c.prototype.bindEvents=function(){}})(jQuery);(function(a){BOOLBOX="boolbox";a.fn.eovabool=function(c){var f=[];this.each(function(){var d=a.data(this,BOOLBOX);d?a.extend(d.options,c):(d=new b(this,c),d.render());a.data(this,BOOLBOX,d);f.push(d)});return 1==f.length?f[0]:f};var b=a.fn.eovabool.BoolBox=function(c,b){this.$dom=a(c);this.defaults={isCheck:!1,isReadonly:!1};var d=void 0,e=this.$dom.data("options");e&&(d=eval("({"+e+"})"),this.$dom.removeAttr("data-options"));this.options=a.extend({},this.defaults,d,b);this.name=this.$dom.attr("name");this.value=this.$dom.attr("value")};b.prototype.render=function(){var c=a("\x3cinput type\x3d'checkbox' /\x3e").appendTo(this.$dom);this.name&&c.attr("name",this.name);this.value&&c.attr("value",this.value);this.options.isCheck&&this.setChecked(!0);this.options.isReadonly&&c.attr("disabled","disabled");this.$boolbox=c};b.prototype.getChecked=function(){return this.$boolbox.prop("checked")};b.prototype.setChecked=function(a){this.$boolbox.prop("checked",a)};b.prototype.readonly=function(a){a&&this.$boolbox.attr("readonly",!0)}})(jQuery);(function(a){var b=a.fn.eovatext.TextBox;TIMEBOX="timebox";a.fn.eovatime=function(b){var d=[];this.each(function(){var e=a.data(this,TIMEBOX);e?a.extend(e.options,b):(e=new c(this,b),e.render(),e.bindEvents());a.data(this,TIMEBOX,e);d.push(e)});return 1==d.length?d[0]:d};var c=a.fn.eovatime.TimeBox=function(c,d){b.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u65f6\u95f4",isReadonly:!1,format:"yyyy-MM-dd HH:mm:ss"};this.options=a.extend({},this.options,this.defaults,a.getHtmlOptions(this),d)};a.extendPrototype(c,b);c.prototype.bindEvents=function(){var a=this.$textbox;this.options.isReadonly||(this.$btn.bind("click",function(){a.trigger("click")}),this.$dom.attr("onClick","WdatePicker({dateFmt:'"+this.options.format+"'})"))}})(jQuery);(function(a){CHECKBOX="checkbox";a.fn.eovacheck=function(c){var f=[];this.each(function(){var d=a.data(this,CHECKBOX);d?a.extend(d.options,c):(d=new b(this,c),d.render());a.data(this,CHECKBOX,d);f.push(d)});return 1==f.length?f[0]:f};var b=a.fn.eovacheck.CheckBox=function(c,b){this.$dom=a(c);this.defaults={isCheck:!1,disable:!1};var d=void 0,e=this.$dom.data("options");e&&(d=eval("({"+e+"})"),this.$dom.removeAttr("data-options"));this.options=a.extend({},this.defaults,d,b);this.name=this.$dom.attr("name");this.value=this.$dom.attr("value")};b.prototype.render=function(){var c=a("\x3cinput type\x3d'checkbox' /\x3e").appendTo(this.$dom);this.name&&c.attr("name",this.name);this.value&&c.attr("value",this.value);this.options.isCheck&&this.setChecked(!0);this.options.disable&&c.attr("disabled","disabled");this.$checkbox=c};b.prototype.getChecked=function(){return this.$checkbox.prop("checked")};b.prototype.setChecked=function(a){this.$checkbox.prop("checked",a)};b.prototype.readonly=function(a){a&&this.$checkbox.attr("readonly",!0)}})(jQuery);(function(a){function b(c){var b=c.$textbox.val().toLowerCase();c.$panel.children().removeClass("eova-combo-hide");""==b?c.setValue(""):c.$panel.children().map(function(){-1==a(this).text().toLowerCase().indexOf(b)&&a(this).addClass("eova-combo-hide")})}function c(a,c){if(a.options.multiple){for(var b=a.getValues(),e=0;e<b.length;e++)if(b[e]==c)return;b.push(c);a.setValues(b)}else a.setValues([c])}function f(a){var c={};if(a=a.$dom.attr("url"))c.url=a;return c}function d(b,e){var d=b.options;b.$panel.empty();a.each(e,function(c,e){var f=e[d.textField],f=a.str.clip(f,24);a('\x3cdiv value\x3d"'+e[d.valueField]+'"\x3e'+f+"\x3c/div\x3e").appendTo(b.$panel)});b.$panel.children("div").unbind(".eovacombo").bind("mousedown.eovacombo",function(e){var f=a(this),g=f.attr("value");if(d.multiple)if(f.hasClass("eova-combo-selected"))for(var f=b.getValues(),h=0;h<f.length;h++){if(f[h]==g){f.splice(h,1);b.setValues(f);break}}else c(b,g);else c(b,g),b.$panel.hide();e.stopPropagation()});b.getValue()&&(d.multiple?b.setValues(b.getValues()):b.setValue(b.getValue()));a.data(b,COMBOBOX,b)}var e=a.fn.eovatext.TextBox;COMBOBOX="combobox";a.fn.eovacombo=function(b){var c=[];this.each(function(){var e=a.data(this,COMBOBOX);e?a.extend(e.options,b):(e=new g(this,b),e.render(),e.reload(),e.bindEvents());a.data(this,COMBOBOX,e);c.push(e)});return 1==c.length?c[0]:c};var g=a.fn.eovacombo.ComboBox=function(b,c){e.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u5185\u5bb9",btnIcon:"",isReadonly:!1,multiple:!1,separator:",",editable:!0,valueField:"id",textField:"cn",url:void 0,exp:void 0,json:void 0,onChange:function(a,b){}};this.options=a.extend({},this.options,this.defaults,f(this),a.getHtmlOptions(this),c)};a.extendPrototype(g,e);g.prototype.render=function(){var b=a("\x3cinput type\x3d'hidden' /\x3e").appendTo(this.$dom),c=a("\x3cinput type\x3d'text' /\x3e").appendTo(this.$dom),e=a("\x3ci class\x3d'ei'\x3e\x3c/i\x3e").appendTo(this.$dom),d=a("\x3cdiv class\x3d'eova-combo-panel'\x3e\x3c/div\x3e").appendTo("body");d.css("cursor","pointer");this.name&&b.attr("name",this.name);this.value&&b.attr("value",this.value);this.options.placeholder&&c.attr("placeholder",this.options.placeholder);this.options.required&&c.attr("required","required");this.options.isReadonly?a.fuck(c):e.attr("title",this.options.btnTitle);this.$valuebox=b;this.$textbox=c;this.$btn=e;this.$panel=d;this.setWidth(this.options.width)};g.prototype.bindEvents=function(){var c=this,e=this.$textbox,d=this.$panel;if(!this.options.isReadonly){d.unbind(".eovacombo");this.$dom.click(function(b){a(".eova-combo-panel").is(":visible")&&a(".eova-combo-panel").hide();var c=e.offset();d.css({position:"absolute",left:c.left-1,top:c.top+21,height:200,overflow:"auto",width:a(this).width()});d.show();b.stopPropagation()});d.bind("mousedown.eovacombo",function(a){return!1});a(document).unbind(".eovacombo").bind("mousedown.eovacombo",function(b){a(".eova-combo-panel").is(":visible")&&a(".eova-combo-panel").hide()});var f=!1;e.bind("propertychange input",function(){f||(f=!0,setTimeout(function(){console.log("combo input event");b(c);f=!1},100))})}};g.prototype.destroy=function(){this.$dom.remove();this.$panel.remove()};g.prototype.reload=function(){var b=this;if(this.options.json)d(b,this.options.json);else{var c=this.$dom.attr("url");this.options.url&&(c=this.options.url);this.options.exp&&(c="/widget/comboJson?exp\x3d"+this.options.exp);(c=a.appendUrlPara(c,"multiple",this.options.multiple))?a.ajax({type:"get",async:!0,url:c,dataType:"json",success:function(a){d(b,a)},error:function(){alert("\u4e0b\u62c9\u6846\u52a0\u8f7d\u6570\u636e\u5931\u8d25,URL\x3d"+c)}}):a("\x3cdiv\x3e\u6570\u636e\u672a\u52a0\u8f7d\x3c/div\x3e").appendTo(b.$panel)}};g.prototype.getValue=function(){return this.$valuebox.val()};g.prototype.getValues=function(){var a=this.$valuebox.val();return""==a?[]:a.split(this.options.separator)};g.prototype.setValue=function(a){this.setValues([a])};g.prototype.setValues=function(a){this.$panel.children().removeClass("eova-combo-selected");for(var b=[],c=[],e=0;e<a.length;e++){var d=a[e],f=this.$panel.children("div[value\x3d'"+d+"']");""!=f.text()&&(b.push(d),c.push(f.text()),f.addClass("eova-combo-selected"))}e=this.getValues();this.$valuebox.val(b.join(this.options.separator));this.$textbox.val(c.join(this.options.separator));b=this.options;b.multiple?a.length!=e.length&&b.onChange.call(this.$dom,e,a):a[0]!=e[0]&&b.onChange.call(this.$dom,e[0],a[0])};g.prototype.getText=function(){return this.$textbox.val()};g.prototype.getTexts=function(){var a=this.$textbox.val();return""==a?[]:a.split(this.options.separator)};g.prototype.setText=function(a){return this.setTexts([a])};g.prototype.setTexts=function(a){this.$panel.children().removeClass("eova-combo-selected");for(var b=[],c=[],e=0;e<a.length;e++){var d=a[e],f=this.$panel.children("div:contains('"+d+"')");b.push(f.attr("value"));c.push(d);f.addClass("eova-combo-selected")}this.$valuebox.val(b.join(this.options.separator));this.$textbox.val(c.join(this.options.separator))}})(jQuery);(function(a){function b(a){var b={};if(a=a.$dom.attr("url"))b.url=a;return b}var c=a.fn.eovatext.TextBox;FINDBOX="findbox";a.fn.eovafind=function(b){var c=[];this.each(function(){var e=a.data(this,FINDBOX);e?a.extend(e.options,b):(e=new f(this,b),e.render(),e.bindEvents(),e.init());a.data(this,FINDBOX,e);c.push(e)});return 1==c.length?c[0]:c};var f=a.fn.eovafind.FindBox=function(e,d){c.apply(this,arguments);this.defaults={width:180,btnTitle:"\u70b9\u51fb\u67e5\u627e\u5185\u5bb9",isReadonly:!1,multiple:!1,separator:",",url:void 0,exp:void 0,onChange:function(a,b){}};this.options=a.extend({},this.options,this.defaults,b(this),a.getHtmlOptions(this),d);this.code=this.$dom.attr("code");this.$dom.removeAttr("code");this.field=this.$dom.attr("field");this.$dom.removeAttr("field")};a.extendPrototype(f,c);f.prototype.render=function(){var b=a("\x3cinput type\x3d'hidden' /\x3e").appendTo(this.$dom),c=a("\x3cinput type\x3d'text' /\x3e").appendTo(this.$dom),d=a("\x3ci class\x3d'ei'\x3e\x3c/i\x3e").appendTo(this.$dom);this.name&&b.attr("name",this.name);this.value&&b.val(this.value);this.options.placeholder&&c.attr("placeholder",this.options.placeholder);this.options.required&&c.attr("required","required");c.attr("readonly","readonly");this.options.isReadonly?c.css({background:"rgba(218, 218, 218, 0.4)"}):(c.css("cursor","pointer"),c.attr("title",this.options.btnTitle),d.attr("title",this.options.btnTitle));this.$valuebox=b;this.$textbox=c;this.$btn=d;this.setWidth(this.options.width);console.log("\u7b80\u5355\u624d\u662f\u9ad8\u79d1\u6280\uff0c\u56e0\u4e3a\u7b80\u5355\u6240\u4ee5\u66f4\u5feb\uff1a http://www.eova.cn/")};f.prototype.init=function(){var b=this.$textbox;this.$valuebox.val()&&a.ajax({url:"/widget/findCnByEn/"+this.code+"-"+this.field+"-"+this.value,dataType:"json",success:function(c){if(0==c.code)b.val(c.data);else{var e=c.text_field,d=[];a.each(eval(c.data),function(a,b){d.push(b[e])});b.val(d.join(","))}}})};f.prototype.bindEvents=function(){var a=this,b=this.$textbox;this.options.isReadonly||(this.$textbox.bind("click",function(){d(a)}),this.$btn.bind("click",function(){b.trigger("click")}))};f.prototype.getValue=function(){return this.$valuebox.val()};f.prototype.setValue=function(a){this.$valuebox.val(a)};f.prototype.getText=function(){return this.$textbox.val()};f.prototype.setText=function(a){this.$textbox.val(a)};f.prototype.getUrl=function(){var b=this.options.url;this.options.exp&&(b="/widget/find?exp\x3d"+this.options.exp);this.options.multiple&&(b=a.appendUrlPara(b,"multiple",this.options.multiple));return b=a.appendUrlPara(b,"val",this.getValue())};var d=function(a){var b=parent.sy.modalDialog({id:"eova_find_dialog",title:"\u8bf7\u9009\u62e9\u6570\u636e",url:a.getUrl(),buttons:[{id:"find_clear",text:"\u6e05\u7a7a\u9009\u62e9",handler:function(){b.find("iframe").get(0).contentWindow.clearData(b,a);window.focus()}},{id:"find_ok",text:"\u786e\u5b9a",handler:function(){b.find("iframe").get(0).contentWindow.selectData(b,a);window.focus()}}]},650,600)}})(jQuery);$(function(){setTimeout(function(){if(navigator.onLine){var a=$(".footer a"),b=a.data("app");b&&$.ajax({url:"//www.eova.cn/api/live/"+b,type:"post",data:{copyright:a.text()},error:function(){}})}},6E4)});(function(a){var b=a.fn.eovatext.TextBox;ICONBOX="iconbox";a.fn.eovaicon=function(b){var e=[];this.each(function(){var d=a.data(this,ICONBOX);d?a.extend(d.options,b):(d=new c(this,b),d.render(),d.bindEvents());a.data(this,ICONBOX,d);e.push(d)});return 1==e.length?e[0]:e};var c=a.fn.eovaicon.IconBox=function(c,e){b.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u9009\u62e9\u56fe\u6807",isReadonly:!1};this.options=a.extend({},this.options,this.defaults,e)};a.extendPrototype(c,b);var f=function(a,b){var c=parent.sy.modalDialog({id:"icon_dialog",title:"\u4fee\u6539ICON",url:"/toIcon",buttons:[{id:"icon_ok",text:"\u4fee\u6539",handler:function(){c.find("iframe").get(0).contentWindow.selectIcon(c,a,b);window.focus()}}]},572,390)};c.prototype.bindEvents=function(){var a=this.$textbox,b=this.$btn;this.options.isReadonly?a.attr("readonly","readonly"):(b.bind("click",function(){b.addClass("ext-icon-zoom");f(a,b)}),this.$textbox.bind("click",function(){b.trigger("click")}))}})(jQuery);(function(a){var b=a.fn.eovatext.TextBox;a.fn.eovainfo=function(b){var e=[];this.each(function(){var d=a.data(this,"infobox");d?a.extend(d.options,b):(d=new c(this,b),d.render(),d.bindEvents());a.data(this,"infobox",d);e.push(d)});return 1==e.length?e[0]:e};var c=a.fn.eovainfo.InfoBox=function(c,e){b.apply(this,arguments);this.defaults={btnTitle:"\u70b9\u51fb\u7f16\u8f91\u4fe1\u606f",isReadonly:!1};this.options=a.extend({},this.options,this.defaults,e)};a.extendPrototype(c,b);var f=function(b){var c=b.val();c&&(-1!=c.indexOf("function")&&-1!=c.indexOf("return")?c=js_beautify(c,4):(c=c.replace(/<%/g,"\n\x3c%"),c=c.replace(/%>/g,"%\x3e\n")));var d=parent.sy.modalDialog({id:"eova-info-text-dlg",title:"\u5feb\u901f\u7f16\u8f91",content:'\x3ctextarea id\x3d"eova-info-text" class\x3d"eova-info-text"\x3e'+c+"\x3c/textarea\x3e",buttons:[{text:" \u4fdd \u5b58 ",handler:function(){(c=parent.$("#eova-info-text").val())&&-1!=c.indexOf("function")&&-1!=c.indexOf("return")&&(c=a.compressWhiteSpace(c));b.val(c);d.dialog("destroy")}}]},650,390);a.autoFocus(parent.$("#eova-info-text"))};c.prototype.bindEvents=function(){var a=this.$textbox,b=this.$btn;b.bind("click",function(){f(a)});this.$textbox.bind("click",function(){b.trigger("click")})}})(jQuery);
/*# sourceMappingURL=eova.min.js.map */